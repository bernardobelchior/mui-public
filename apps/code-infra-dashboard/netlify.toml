[build]
  # Directory to change to before starting a build.
  base = "apps/code-infra-dashboard"

  # The deploy-ready HTML files and assets generated by the build.
  publish = "build"

  # Build command.
  command = "pnpm build"

  # Decide when to build Netlify
  ignore = "cd ../../ && git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF $(pnpm ls --filter code-infra-dashboard --parseable --only-projects) pnpm-lock.yaml"

[dev]
  command = "pnpm start"
  targetPort = 3000

[build.environment]
  NODE_VERSION = "18"
  PNPM_FLAGS = "--ignore-workspace"

[functions]
  directory = "functions"
