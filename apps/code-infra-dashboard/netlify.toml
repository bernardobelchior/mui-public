[build]
  base = "apps/code-infra-dashboard"

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "build"

  # Default build command.
  command = "pnpm build"

  # Deciden when to build Netlify
  ignore = "git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF apps/code-infra-dashboard pnpm-lock.yaml"

[dev]
  command = "pnpm start"
  targetPort = 3000

[build.environment]
  NODE_VERSION = "18"
  PNPM_FLAGS = "--ignore-workspace"

[functions]
  directory = "functions"
